{% extends 'base.html' %}

{% block content %}
  <div style="width: 320px; margin-top: 1.5rem;">
    <form method="POST">
      {% csrf_token %}
      <h3>Add Course</h3>
      {% comment %} <div class="mt-3 d-flex justify-content-between">
        <label>Course ID</label>
        <input type="text" name="uid" />
      </div>

      <div class="mt-3 d-flex justify-content-between">
        <label>Course Name</label>
        <input type="text" name="name" />
      </div>

      <div class="mt-3 d-flex justify-content-between">
        <label>Max Students</label>
        <input type="text" name="max_numb_students" />
      </div>

      <div class="mt-3 d-flex justify-content-between">
        <label>Instructors</label>
        <select name='instructors'>
          {%for item in all_instructors %}
            <option value={{item}}>{{item}}</option>
          {%endfor%}
        </select>
      </div> {% endcomment %}


      {% for field in form %}
      <div class="input-container">
        {{ field.label_tag }}
        {% if field.name == 'instructors' %}
          <div style="margin-left: 17px;">
              {{ field }}
          </div>
        {% else %}
          {{ field }}
        {% endif %}        
      </div>
      {% endfor %}
      
      <div class="d-flex align-items-center mt-4 gap-3">
        <button type="submit" class="add-button px-4 py-1">Add</button>
        <input type="button"
          value="Proceed"
          class="proceed-button px-4 py-1"
          onclick="window.location.href='/add-room'"
        />        
      </div>
    </form>
    
  </div>

  {% if all_courses %}
    <h3 class="mt-5">Courses</h3>
    <table class="table table-bordered">
      <tr class="table-heading">
        <td>
          <center>ID</center>
        </td>
        <td>
          <center>Name</center>
        </td>
        <td>
          <center>No. of students</center>
        </td>        
        <td>
          <center>Instructors</center>
          </td>
        <td>
          <center>Operations</center>
        </td>
      </tr>
      {% for course in all_courses %}
        <tr class="table-data">
          <td><center>{{ course.uid }}</center></td>
          <td>
            <center>{{ course.name }}</center>
          </td>
          <td>
            <center>{{ course.max_numb_students }}</center>
          </td>  
          <td>  
            {% for instructor in course.instructors.all %}
              <center>{{ instructor.name }} ({{ instructor.uid }})</center>
            {% empty %}
              <center>No instructors found.</center>
            {% endfor %}
           {% comment %} {% for instructor in selected_instructors %}
              <span>{{ instructor }}</span>
            {% empty %}
              <span>No instructors selected</span>
            {% endfor %}  {% endcomment %}
          </td>       
          <td>
            <center>
              <a class="delete-button" href="{% url 'delete-course' course.uid %}">              
               Del
              <i class="fas fa-trash-alt" style="margin-left: 3px;"></i>
              </a>
            </center>
          </td>
        </tr>
      {% endfor %}
    </table>
  {% endif %}
{% endblock %}
